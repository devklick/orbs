(function(){"use strict";const A=16.666666666666668,u=8,F=1.5,x=10,P=-10,z=x-P;function h(e,t){const n=Math.random();let o,s;if(typeof e=="object"?{min:o,max:s}=e:(o=e??0,s=t??1),o>s)throw new Error("Cannot generate float, max must be greater than min");return n*(s-o)+o}function w(){return Math.random()>.5}function I(){return Number(w())}function O(e){if(e<=0)throw new Error("Cannot generate balanced float. Range must be greater than 0");return Math.random()*e-e/2}function T(e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){if(e>t)throw new Error("Cannot generate int, max must be greater than min");return Math.floor(Math.random()*(t-e+1))+e}function C({h:e,s:t,l:n}){const o=h(e.min,e.max),s=h(t.min,t.max),a=h(n.min,n.max);return`hsl(${o}, ${s}%, ${a}%)`}function D(...e){return e[T(0,e.length-1)]}var r={float:h,bool:w,bit:I,balancedFloat:O,int:T,hsl:C,item:D};function Z(e,t,n,o,s){return{position:{x:r.float(0,e),y:r.float(0,t),z:r.balancedFloat(z)*s},velocity:{x:r.float(0,u),y:r.float(0,u),z:r.float(0,F)*s},phaseOffset:{x:r.float(0,1e3),y:r.float(0,1e3),z:0},size:r.float(15,23*o),zDirection:r.item(-1,1),color:r.hsl(n)}}function G(e,t,n,o,s,a,f){const l=n/A;e.velocity.x=Math.sin(t*.001+e.phaseOffset.x)*u*l*o,e.velocity.y=Math.cos(t*.001+e.phaseOffset.y)*u*l*o,e.velocity.z=Math.cos(t*.001+e.phaseOffset.z)*F*l*e.zDirection*f,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.position.z+=e.velocity.z,(e.position.z>=x||e.position.z<=P)&&(e.zDirection*=-1);const y=z*(f||1),N=-y,g=s+y,S=a+y;e.position.x<N&&(e.position.x+=g),e.position.x>g&&(e.position.x-=g),e.position.y<N&&(e.position.y+=S),e.position.y>S&&(e.position.y-=S)}function X(e,t){const n=e.position.z>0?Math.abs(e.position.z)*1.5:Math.abs(e.position.z)*.5,o=Math.max(e.size+e.position.z,1e-4);t.filter=`blur(${n}px)`,t.beginPath(),t.arc(e.position.x,e.position.y,o,0,Math.PI*2),t.fillStyle=e.color,t.closePath()}function $({width:e,height:t,orbColorRange:n,orbDensity:o,maxOrbSize:s,zDepth:a}){const f=e*t,l=Math.max(10,f/2e4)*o;return Array.from({length:l},()=>Z(e,t,n,s,a))}var E;(e=>{e.Types={fps:"FPS"}})(E||(E={}));var _;(e=>{e.Types={stop:"STOP",update:"UPDATE",setup:"SETUP",pause:"PAUSE",resume:"RESUME",resize:"RESIZE"}})(_||(_={}));const k=500;let c,R,p,i,d=!1,v=0,m=[];self.onmessage=e=>q(e.data);function q(e){switch(e.type){case"SETUP":return B(e);case"RESIZE":return V(e);case"STOP":return W();case"UPDATE":return U(e);case"PAUSE":return Y();case"RESUME":return j(e);default:console.warn("Unknown message received",e);return}}function B(e){e.canvas&&!i&&(i=e.canvas)}function V(e){i&&(c&&cancelAnimationFrame(c),i.width=e.width,i.height=e.height,U({...e}))}function W(e){c&&cancelAnimationFrame(c)}function Y(e){c&&cancelAnimationFrame(c),d=!0}function j(e){const t=i==null?void 0:i.getContext("2d");t&&(d=!1,p=performance.now(),c=requestAnimationFrame(n=>M(n,{xySpeed:e.xySpeed,ctx:t,zDepth:e.zDepth})))}function U({maxOrbSize:e,orbColorRange:t,orbDensity:n,xySpeed:o,zDepth:s}){const a=i==null?void 0:i.getContext("2d");a&&(R=$({width:i.width,height:i.height,maxOrbSize:e,orbColorRange:t,orbDensity:n,zDepth:s}),p=performance.now(),c=requestAnimationFrame(f=>M(f,{xySpeed:o,ctx:a,zDepth:s})))}function M(e,{xySpeed:t,ctx:n,zDepth:o}){const{deltaTime:s}=L(e);n.clearRect(0,0,i.width,i.height);for(const a of R)G(a,e,s/A,t,i.width,i.height,o),X(a,n),n.fill();d||(c=requestAnimationFrame(a=>M(a,{ctx:n,xySpeed:t,zDepth:o})))}function L(e){const t=e-p;if(m.push(1e3/t),p=e,e-v>k){const n=m.reduce((o,s)=>o+s,0)/m.length;m=[],self.postMessage({type:E.Types.fps,fps:n}),v=e}return{deltaTime:t}}})();
